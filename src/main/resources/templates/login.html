<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"  xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4" lang="en">
<head>
<meta charset="UTF-8">
<meta name="_csrf" th:content="${_csrf.token}"/>
<meta name="_csrf_header" th:content="${_csrf.headerName}"/>
<title>登录</title>
<link href="../AmazeUI-2.4.2/assets/css/amazeui.css" th:href="@{/AmazeUI-2.4.2/assets/css/amazeui.css}" rel="stylesheet" media="all"/>
<link href="../css/dlstyle.css" th:href="@{/css/dlstyle.css}" rel="stylesheet" type="text/css">
<script type="text/javascript" src="../AmazeUI-2.4.2/assets/js/jquery.min.js" th:src="@{/AmazeUI-2.4.2/assets/js/jquery.min.js}"></script>
</head>
<body>
	<div class="login-boxtitle">
		<a href="home.html"><img alt="logo" src="../images/logobig.png" /></a>
	</div>

	<div class="login-banner">
		<div class="login-main">
			<div class="login-banner-bg">
				<span></span><img src="../images/big.jpg" />
			</div>
			<div class="login-box">

				<h3 class="title">登录商城</h3>

				<div class="clear"></div>

				<div class="login-form">
					<form id="f" th:action="@{/user/do_login}" th:method="post">
						<div th:if="${param.error}">
                        	<div class="alert alert-danger" th:text="${param.error}">
                            	Invalid username and password.
                        	</div>
                    	</div>
						<div class="user-name">
							<label for="user"><i class="am-icon-user"></i></label> 
							<input class="in" type="text" name="userName" id="user" placeholder="邮箱/手机/用户名" required/>
						</div>
						<div class="user-pass">
							<label for="password"><i class="am-icon-lock"></i></label> 
							<input class="in" type="password" name="password" id="password" placeholder="请输入密码" required/>
						</div>
					</form>
				</div>
				<span id="error"></span>
				<div class="login-links">
					<label for="remember-me"><input id="remember-me"
						type="checkbox">记住密码</label> <a href="#" class="am-fr">忘记密码</a> <a
						href="/register" class="zcnext am-fr am-btn-default">注册</a> <br />
				</div>
				<div class="am-cf">
					<input type="button" id="sub" name="" value="登 录"
						class="am-btn am-btn-primary am-btn-sm"/>
				</div>
				<div class="partner">
					<h3>合作账号</h3>
					<div class="am-btn-group">
						<li>
							<a href="#"><i class="am-icon-qq am-icon-sm"></i><span>QQ登录</span></a>
						</li>
						<li>
							<a href="#"><i class="am-icon-weibo am-icon-sm"></i><span>微博登录</span></a>
						</li>
						<li>
							<a href="#"><i class="am-icon-weixin am-icon-sm"></i><span>微信登录</span></a>
						</li>
					</div>
				</div>
			</div>
		</div>
	</div>
	<script type="text/javascript">
	$("#sub").on("click",function(){
	    var user=$("#user").val();
		var password=$("#password").val();
		if(user==""||password=="") {
			$("#error").css({'color':'red'});
			$("#error").html("输入不能为空！");
		}else {
			document.getElementById("f").submit();
		} 
	})
	$(".in").on("focus",function(){
		$("#error").html("");
	})
	/* $("#user").on("blur",function(){
			var token = $("meta[name='_csrf']").attr("content");
			var header = $("meta[name='_csrf_header']").attr("content");
			$.ajax({
				url:"http://localhost:8080/user/verifyUser",
				type:"post",
				headers:{header:token},
				beforeSend:function(xhr) {
	                xhr.setRequestHeader(header,token);
	            },
				data:{"userName":$("#user").val()},
				success:function(data){
					$('#error').html(data).css('color','red');
				}
			});
		}) */
	</script>
	
</body>
</html>